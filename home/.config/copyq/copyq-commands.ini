[Commands]
1\Command="
    var timeoutMilliseconds = 500;
    
    function reset(key, getFn, setFn) {
      if (hasData()) {
        settings(key, [data(mimeText), Date.now()])
      } else {
        var last = settings(key)
        if (!last)
            return;
    
        afterMilliseconds(timeoutMilliseconds, function() {
          if (!str(getFn()) && last[1] == settings(key)[1]) {
            serverLog('Reset from ' + key)
            setFn(mimeText, last[0], mimeHidden, 1)
          }
        })
      }
    }
    
    function resetClipboard() {
      reset('lastClipboard', clipboard, copy)
    }
    
    function resetSelection() {
      reset('lastSelection', selection, copySelection)
    }
    
    var onClipboardChanged_ = onClipboardChanged
    onClipboardChanged = function() {
      onClipboardChanged_()
    
      isClipboard() ? resetClipboard() : resetSelection()
    
      if (!hasData())
        sleep(2 * timeoutMilliseconds)
    }"
1\Icon=\xf246
1\IsScript=true
1\Name=Reset Empty Clipboard/Selection
10\Command=copyq: plugins.itempinned.pin()
10\Icon=\xf08d
10\InMenu=true
10\Input=!OUTPUT
10\InternalId=copyq_pinned_pin
10\Name=Pin
10\Output=application/x-copyq-item-pinned
11\Command=copyq: plugins.itempinned.unpin()
11\Icon=\xf08d
11\InMenu=true
11\Input=application/x-copyq-item-pinned
11\InternalId=copyq_pinned_unpin
11\Name=Unpin
2\Command="
    copyq:
    var shortcut = str(data(mimeShortcut))
    var row = currentItem()
    if (shortcut == 'ctrl+j' || shortcut == 'ctrl+n')
        selectItems(row + 1)
    else
        selectItems(row - 1)"
2\Icon=\xf338
2\InMenu=true
2\Name=Up/Down
2\Shortcut=ctrl+j, ctrl+k, ctrl+n, ctrl+p
3\Automatic=true
3\Icon=\xf21b
3\Input=x-kde-passwordManagerHint
3\Name=KeePassXC protector v3
3\Remove=true
4\Command="
    copyq:
    open(input().text())"
4\HideWindow=true
4\Icon=\xf0ac
4\InMenu=true
4\Input=application/x-copyq-item-notes
4\Name=Open in Browser
4\Shortcut=ctrl+i
5\Command=copyq: plugins.itemtags.tag(decodeURIComponent('Important'))
5\Icon=\xf02b
5\InMenu=true
5\InternalId=copyq_tags_tag:Important
5\MatchCommand=copyq: plugins.itemtags.hasTag(decodeURIComponent('Important')) && fail()
5\Name=Tag as \x201cImportant\x201d
6\Command=copyq: plugins.itemtags.untag(decodeURIComponent('Important'))
6\Icon=\xf02b
6\InMenu=true
6\InternalId=copyq_tags_untag:Important
6\MatchCommand=copyq: plugins.itemtags.hasTag(decodeURIComponent('Important')) || fail()
6\Name=Remove tag \x201cImportant\x201d
7\Command=copyq: plugins.itemtags.tag()
7\Icon=\xf02b
7\InMenu=true
7\InternalId=copyq_tags_tag
7\Name=Add a Tag
8\Command=copyq: plugins.itemtags.untag()
8\Icon=\xf02b
8\InMenu=true
8\Input=application/x-copyq-tags
8\InternalId=copyq_tags_untag
8\Name=Remove a Tag
9\Command=copyq: plugins.itemtags.clearTags()
9\Icon=\xf02b
9\InMenu=true
9\Input=application/x-copyq-tags
9\InternalId=copyq_tags_clear
9\Name=Clear all tags
size=11
